{% extends "base_page_schema.html" %}

{% load i18n %}
{% load static %}

{% block menu_links %}
{% include 'manager/main_menu.html' %}
{% endblock menu_links %}

{% block clean_content %}

<div id="collapseDiv1-lft" class="collapse-div collapse-left-icon" role="tablist">
    <div class="collapse-header" id="heading1-lft">
        <button data-toggle="collapse" data-target="#collapse1-lft" aria-expanded="false" aria-controls="collapse1-lft">
            <svg class="icon icon-sm">
                <use xlink:href="{% static 'svg/sprite.svg' %}#it-user"></use>
            </svg>
            {% trans "Configurazione dati personali" %}
        </button>
    </div>
    <div id="collapse1-lft" class="collapse" role="tabpanel" aria-labelledby="heading1-lft">
        <div class="collapse-body">
            {% include 'email-toggle-notify.html' %}
            {% include 'user_data.html' %}
        </div>
    </div>

    <div class="collapse-header" id="heading2-lft">
        <button data-toggle="collapse" data-target="#collapse2-lft" aria-expanded="false" aria-controls="collapse2-lft">
            <svg class="icon icon-sm">
                <use xlink:href="{% static 'svg/sprite.svg' %}#it-file"></use>
            </svg>
            {% trans "Configurazioni protocollo informatico" %}
        </button>
    </div>

    <div id="collapse2-lft" class="collapse" role="tabpanel" aria-labelledby="heading2-lft">
        <div class="collapse-body">

            <div class="row">
                <div class="col">
                    <div class="card-wrapper card-space pb-3">
                        <div class="card card-bg no-after">
                            <div class="card-body">
                                Lorem ipsum dolor sit amet, consectetur
                                adipiscing elit, sed do eiusmod tempor
                                incididunt ut labore et dolore magna aliqua.
                                Ut enim ad minim veniam, quis nostrud exercitation
                                ullamco laboris nisi ut aliquip ex ea commodo
                                consequat. Duis aute irure dolor in reprehenderit
                                in voluptate velit esse cillum dolore eu
                                fugiat nulla pariatur. Excepteur sint
                                occaecat cupidatat non proident, sunt in
                                culpa qui officia deserunt mollit anim
                                id est laborum.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div class="card-space card-wrapper">
                        <div class="card card-bg no-after">
                            <div class="card-body">
                                {% if protocol_configurations %}
                                    <div class="table-responsive">
                                        <table class="table table-striped table-hover">
                                            <thead>
                                                <tr role="row">
                                                    <th>{% trans "Denominazione" %}</th>
                                                    <th>{% trans "Creata il" %}</th>
                                                    <th>{% trans "Modificata il" %}</th>
                                                    <th>{% trans "Cod. titolario" %}</th>
                                                    <th>{% trans "Cod. fascicolo" %}</th>
                                                    <th>{% trans "Stato" %}</th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {% for conf in protocol_configurations %}
                                                <tr>
                                                    <td>
                                                        <a href="{% url 'uni_ticket:manager_structure_protocol_configuration_detail' structure_slug=structure.slug configuration_id=conf.pk %}">
                                                            {{ conf.name }}
                                                        </a>
                                                    </td>
                                                    <td>{{ conf.created }}</td>
                                                    <td>{{ conf.modified }}</td>
                                                    <td>{{ conf.protocollo_cod_titolario }}</td>
                                                    <td>{{ conf.protocollo_fascicolo_numero }}</td>
                                                    <td>
                                                        {% if conf.is_active %}
                                                        <span class="badge badge-success mb-2">
                                                            {% trans "Attiva" %}
                                                        </span>
                                                        {% else %}
                                                        <span class="badge badge-danger mb-2">
                                                            {% trans "Non attiva" %}
                                                        </span>
                                                        {% endif %}
                                                    </td>
                                                    <td>
                                                        <button type="button"
                                                                class="mx-1 btn btn-outline-danger btn-xs float-right"
                                                                data-toggle="modal"
                                                                data-target="#deleteConf{{ forloop.counter0 }}">
                                                            {% trans "Elimina" %}
                                                        </button>
                                                    </td>
                                                </tr>
                                                {% endfor %}
                                            </tbody>
                                        </table>
                                    </div>
                                {% endif %}
                                <div>
                                    <a class="btn btn-outline-success btn-block mt-4"
                                       href="{% url 'uni_ticket:manager_structure_protocol_configuration_new' structure_slug=structure.slug %}">
                                        <svg class="icon icon-xs icon-success">
                                          <use xlink:href="{% static 'svg/sprite.svg' %}#it-plus-circle"></use>
                                        </svg> Aggiungi nuova configurazione
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


{% endblock clean_content %}

{% block extra_scripts %}
{{ block.super }}
<script type="text/javascript" src="{% static 'js/intercooler-1.2.2.js' %}"></script>
{% endblock extra_scripts %}
